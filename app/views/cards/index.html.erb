<h1>Card Browser</h1>

<%= render "card_filters_nav" %>

<%= form_with url: cards_path, method: :get do %>
    <p>
        <%= label_tag :query, "Search by Name:" %>
        <%= text_field_tag :query, params[:query] %>
    </p>

    <p>
        <%= label_tag :color_id, "Filter by Color:" %>
        <%= select_tag :color_id,
            options_from_collection_for_select(@colors, :id, :color, params[:color_id]),
            include_blank: true
        %>
    </p>

    <p>
        <%= label_tag :card_type_id, "Filter by Type:" %>
        <%= select_tag :card_type_id,
            options_from_collection_for_select(@card_types, :id, :card_type, params[:card_type_id]),
            include_blank: true
        %>
    </p>

    <p>
        <%= label_tag :keyword_id, "Filter by Keyword:" %>
        <%= select_tag :keyword_id,
            options_from_collection_for_select(@keywords, :id, :keyword, params[:keyword_id]),
            include_blank: true
        %>
    </p>

    <%= submit_tag "Search" %>
    <%= link_to "Clear", cards_path, class: "button", style: "margin-left: 10px;" %>
<% end %>

<ul>
  <% @cards.each do |card| %>
    <li>
      <%= link_to card.card_name.titleize, card_path(card) %>
      <% if card.mana_cost.present? %> - <%= card.mana_cost %><% end %>
    </li>
  <% end %>
</ul>

<%= paginate @cards %>

<% if @cards.empty? %>
  <p>No cards found :(</p>
<% end %>
